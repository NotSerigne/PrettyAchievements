<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pretty Achievements</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- notification.js will be loaded at the end of body -->
</head>
<body>
<!-- Overlay for sidebar -->
<div class="overlay" id="overlay"></div>

<!-- Menu burger button -->
<button class="burger-menu" id="burgerMenu">
    <span></span>
    <span></span>
    <span></span>
</button>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <!-- Notification Markup for SimpleNotification -->
    <div id="simple-notification-markup" style="display:none">
      <div class="simple-notification">
        <div class="simple-notification-title"></div>
        <div class="simple-notification-message"></div>
      </div>
    </div>
    <div class="sidebar-header">
        <h2>Pretty Achievements</h2>
    </div>

    <!-- ‚úÖ Section principale avec search et contenu scrollable -->
    <div class="menu-main-section">
        <div class="search-container">
            <label for="searchBar"></label><input type="text" class="search-bar" id="searchBar" placeholder="Rechercher un jeu...">
            <span class="search-icon">üîç</span>
        </div>

        <!-- Ici va le contenu scrollable comme les jeux, settings, etc. -->
        <div class="scrollable-content">
            <!-- Contenu qui peut scroller -->
        </div>
    </div>

    <!-- ‚úÖ Menu items fix√©s en bas -->
    <div class="menu-items">
        <div class="menu-item active" data-section="dashboard">
            <span class="menu-icon">üè†</span>
            <span class="menu-tooltip">Dashboard</span>
        </div>
        <div class="menu-item" data-section="games">
            <span class="menu-icon">üéÆ</span>
            <span class="menu-tooltip">Jeux</span>
        </div>
        <div class="menu-item" data-section="achievements">
            <span class="menu-icon">üìà</span>
            <span class="menu-tooltip">Stats</span>
        </div>
        <div class="menu-item" data-section="settings">
            <span class="menu-icon">‚öôÔ∏è</span>
            <span class="menu-tooltip">R√©glages</span>
        </div>
    </div>
</div>

<!-- Main content -->
<main class="main-content" id="mainContent">
    <!-- ===== DASHBOARD ===== -->
    <div class="content-section active" id="dashboard">
        <h1>Tableau de bord</h1>
        <div class="dashboard-grid">
            <div class="stat-card">
                <h3>Jeux Totaux</h3>
                <div class="stat-number" id="totalGames">0</div>
            </div>
            <div class="stat-card">
                <h3>Succ√®s D√©bloqu√©s</h3>
                <div class="stat-number" id="unlockedAchievements">0</div>
            </div>
            <div class="stat-card">
                <h3>Taux de Compl√©tion moyen</h3>
                <div class="stat-number" id="completionRate">0%</div>
            </div>
        </div>
    </div>

    <!-- ===== GAMES AVEC IMAGES STEAM ===== -->
    <div class="content-section" id="games">
        <h1>Mes Jeux</h1>
        <div class="games-loading" id="gamesLoading" style="display: none;">
            <div class="loading-spinner">‚ö°</div>
            <p>Chargement des images Steam...</p>
        </div>
        <div class="games-grid" id="gamesGrid">
            <!-- ‚ú® Template pour chaque jeu avec images Steam -->
        </div>
    </div>

    <!-- ===== ACHIEVEMENTS ===== -->
    <div class="content-section" id="achievements">
        <h1>Statistiques</h1>
        <div class="achievements-container" id="achievementsContainer">
            <!-- Achievements will be added dynamically -->
        </div>
    </div>

    <!-- ===== STATISTICS ===== -->
    <div class="content-section" id="statistics">
        <h1>Statistiques</h1>
        <div class="dashboard-grid" id="statisticsContainer">
            <!-- Statistics will be added dynamically -->
        </div>
    </div>

    <!-- ===== SETTINGS AVEC OPTIONS STEAM ===== -->
    <div class="content-section" id="settings">
        <h1>Param√®tres</h1>
        <div class="settings-container">
            <div class="settings-group">
                <h3>G√©n√©ral</h3>

                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="autoStart">D√©marrage automatique</label>
                        <input type="checkbox" id="autoStart">
                        <span class="switch" aria-hidden="true"></span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="notifications">Notifications</label>
                        <input type="checkbox" id="notifications" checked>
                        <span class="switch" aria-hidden="true"></span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="minimizeToTray">Minimiser dans la barre</label>
                        <input type="checkbox" id="minimizeToTray">
                        <span class="switch" aria-hidden="true"></span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="refreshEveryMinutes">Rafra√Æchissement toutes les</label>
                        <input type="number" id="refreshEveryMinutes" min="1" max="10080" value="15" style="width:90px;margin-left:auto;">
                        <span style="margin-left:8px;color:var(--text-secondary)">minutes</span>
                    </div>
                </div>
            </div>
            <div class="settings-group">
                <h3>Notifications</h3>
                <div class="setting-item" style="display:flex;justify-content:space-between;gap:18px;">
                    <div style="flex:1;min-width:120px;display:flex;flex-direction:column;gap:12px;">
                        <div style="display:flex;align-items:center;justify-content:space-between;gap:18px;">
                            <label style="color:var(--text-primary);font-weight:500;margin-top:0;">Position de la notification</label>
                            <div class="notify-position-grid" id="notifyPositionGrid">
                                <button class="notify-cell" data-position="top-left" title="Haut gauche"></button>
                                <button class="notify-cell" data-position="top-center" title="Haut centre"></button>
                                <button class="notify-cell" data-position="top-right" title="Haut droite"></button>
                                <div class="notify-cell disabled" aria-disabled="true"></div>
                                <div class="notify-cell disabled" aria-disabled="true"></div>
                                <div class="notify-cell disabled" aria-disabled="true"></div>
                                <button class="notify-cell" data-position="bottom-left" title="Bas gauche"></button>
                                <button class="notify-cell" data-position="bottom-center" title="Bas centre"></button>
                                <button class="notify-cell" data-position="bottom-right" title="Bas droite"></button>
                            </div>
                        </div>
                        <div style="display:flex;flex-direction:column;gap:4px;">
                            <button class="browse-btn" id="testNotificationBtn">Tester la notification</button>
                            <div id="testNotificationFeedback" style="color:var(--text-secondary);font-size:0.9rem;"></div>
                        </div>
                        <div style="display:flex;align-items:center;justify-content:space-between;gap:18px;">
                            <label style="color:var(--text-primary);font-weight:500;">Son de la notification</label>
                            <label for="notificationSound"></label><select id="notificationSound" style="padding:6px 12px;background:var(--bg-color);border:1px solid var(--border-color);border-radius:6px;color:var(--text-primary);min-width:150px;">
                                <option value="none">Aucun son</option>
                                <option value="steam">Steam</option>
                                <option value="steam-deck">Steam Deck</option>
                                <option value="xbox">Xbox</option>
                                <option value="xbox-rare">Xbox (rare)</option>
                                <option value="ps4">PS4</option>
                                <option value="ps5">PS5</option>
                                <option value="win8">Windows 8</option>
                                <option value="win10">Windows 10</option>
                                <option value="win11">Windows 11</option>
                                <option value="gog">GOG Galaxy</option>
                                <option value="popcorn">Pop corn</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="settings-group">
                <h3>Images</h3>
                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="enableSteamImages">Charger images Steam officielles</label>
                        <input type="checkbox" id="enableSteamImages" checked>
                        <span class="switch" aria-hidden="true"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Type d'image</label>
                    <label for="steamImageQuality"></label><select id="steamImageQuality">
                    <option value="high">Hero</option>
                    <option value="medium">Header</option>
                </select>
                </div>
                <div class="setting-item">
                    <label>Cache images (jours)</label>
                    <label for="imageCacheDuration"></label><input type="number" id="imageCacheDuration" min="1" max="30" value="7">
                </div>
                <div class="setting-item">
                    <div class="cache-actions">
                        <button class="test-steam-btn">üß™ Tester Steam</button>
                        <button class="clear-image-cache-btn">üóëÔ∏è Vider Cache Images</button>
                    </div>
                </div>
            </div>

            <div class="settings-group">
                <h3>D√©tection des Jeux</h3>
                <div class="setting-item">
                    <h4>Dossiers par d√©faut recherch√©s :</h4>
                    <ul class="default-paths">
                        <li>üìÅ <strong>%public%/documents/steam/rune/[AppID]/achievements.ini</strong></li>
                        <li>üìÅ <strong>%public%/documents/steam/codex/[AppID]/achievements.ini</strong></li>
                        <li>üìÅ <strong>%appdata%/steam/codex/[AppID]/achievements.ini</strong></li>
                    </ul>
                </div>
                <div class="setting-item">
                    <label>Ajouter un dossier √† scanner</label>
                    <div class="folder-input-group">
                        <label for="scanFolderPath"></label><input type="text" id="scanFolderPath" placeholder="S√©lectionner un dossier...">
                        <button class="browse-btn" data-target="scanFolderPath">Parcourir</button>
                        <button class="browse-btn add-folder-btn" id="addScanFolderBtn">Ajouter</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Dossiers ajout√©s</label>
                    <ul id="addedScanFolders" class="added-folders-list">
                        <!-- Les dossiers ajout√©s s'afficheront ici -->
                    </ul>
                </div>
            </div>
            <div class="settings-group">
                <h3>Cache & Performance</h3>
                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="autoRefreshCache">Automatiquement rafra√Æchir le cache</label>
                        <input type="checkbox" id="autoRefreshCache" checked>
                        <span class="switch" aria-hidden="true"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="setting-toggle">
                        <label for="cacheDuration">Dur√©e cache</label>
                        <input type="number" id="cacheDuration" min="1" max="168" value="24" style="width:90px;margin-left:auto;">
                        <span style="margin-left:8px;color:var(--text-secondary)">heures</span>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="cache-actions">
                        <button class="clear-cache-btn">Vider le Cache</button>
                        <button class="refresh-cache-btn">Rafra√Æchir</button>
                    </div>
                    <div id="saveSettingsFeedback" style="margin-top:8px;font-size:0.9rem;color:var(--text-secondary);"></div>
                </div>
            </div>
        </div>
        <button id="saveSettingsBtn" class="settings-save-floating" style="position: fixed; right: 24px; bottom: 24px; padding: 12px 18px; border: none; border-radius: 8px; background: var(--primary-color); color: #fff; box-shadow: 0 6px 16px rgba(103,156,223,0.4); cursor: pointer; z-index: 10;">Enregistrer</button>
    </div>
</main>
<div id="notification-container"></div>
<script src="js/app.js" defer></script>
<script src="../notifications/notification.js"></script>
</body>
</html>
